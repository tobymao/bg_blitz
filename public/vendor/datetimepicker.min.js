/* 
Date Time Picker v1.0.3

This content is released under the MIT License.
http://www.opensource.org/licenses/mit-license.php 

Copyright (C) 2017 Colin McIntyre
 
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
DateTimePicker.version="1.0.3";function DateTimePicker(d,c){var a={version:DateTimePicker.version,d:"",today:"",choice:{},limit:{},contents:null,picker:null,events:{},open:null,attachTo:null,input:null,options:{pickerClass:"datetimepicker",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],daySuffix:["th","st","nd","rd"],nextText:"&raquo;",prevText:"&laquo;",dayShort:2,monthShort:3,startDay:1,timePicker:false,timePickerOnly:false,timePickerFormat:24,minuteIncrement:1,yearPicker:true,format:"d/m/Y",allowEmpty:false,allowInput:false,startView:"month",positionOffset:{x:0,y:0},minDate:null,maxDate:null,inputOutputFormat:"T",startDate:null,debug:false,toggleElementsOnly:true,toggleElements:null,beforeShow:null,onClose:null,onSelect:null,onChange:null},initialise:function(a,b){var c=this;this.attachTo=a;this.options=this.merge(this.options,b);this.bind(false);if(this.options.timePickerOnly){this.options.timePicker=true;this.options.startView="time"}this.formatMinMaxDates();return this},formatMinMaxDates:function(){if(this.options.minDate&&this.options.minDate.format){this.options.minDate=this.unformat(this.options.minDate.date,this.options.minDate.format);this.options.minDate.setHours(0);this.options.minDate.setMinutes(0);this.options.minDate.setSeconds(0)}if(this.options.maxDate&&this.options.maxDate.format){this.options.maxDate=this.unformat(this.options.maxDate.date,this.options.maxDate.format);this.options.maxDate.setHours(23);this.options.maxDate.setMinutes(59);this.options.maxDate.setSeconds(59)}},setDate:function(b){this.options.startDate=b||null;if(!b)for(var c=document.querySelectorAll(this.attachTo),a=0;a<c.length;a++)c[a].value="";this.bind()},refresh:function(){this.bind()},bind:function(){var b=this;if(this.options.toggleElements)var d=document.querySelectorAll(this.options.toggleElements);for(var f=document.querySelectorAll(this.attachTo),c=0;c<f.length;c++){var a=f[c],e="";if(this.options.startDate)if(Object.prototype.toString.call(this.options.startDate).indexOf("Date")!=-1)e=this.format(this.options.startDate,this.options.format);else e=this.format(new Date(this.unformat(this.options.startDate,this.options.inputOutputFormat?this.options.inputOutputFormat:this.options.format)),this.options.format);else if(a.value){var g=this.unformat(a.value,this.options.inputOutputFormat?this.options.inputOutputFormat:this.options.format);if(g)e=this.format(new Date(g),this.options.format)}else if(!this.options.allowEmpty)e=this.format(new Date,this.options.format);a.className=(a.className.indexOf("has-datetimepicker")==-1?"has-datetimepicker"+(a.className.length>0?" ":""):"")+a.className;a.value=e;a.onkeydown=function(a){a=a?a:window.event;if(b.options.allowEmpty&&(a.keyCode==46||a.keyCode==8)){this.value="";b.close(true)}else if(a.keyCode==9||a.keyCode==27)b.close(true);else if(a.keyCode==13){if(!b.open){b.onFocus(this);a.stopPropagation?a.stopPropagation():(a.cancelBubble=true)}}else if(!b.options.allowInput&&(!a.ctrlKey&&(a.keyCode!=67||a.keyCode!=65)))a.preventDefault?a.preventDefault():(a.returnValue=false)};a.onpaste=function(){return false};if(this.options.toggleElements)if(d[c]){d[c].style.cursor="pointer";d[c].className=(d[c].className.indexOf("datetimepicker-toggler")==-1?"datetimepicker-toggler"+(d[c].className.length>0?" ":""):"")+d[c].className;d[c].inputField=a;d[c].onclick=function(){if(b.open)b.close(true);else b.onFocus(this.inputField,this)}}if(!this.options.toggleElements||!this.options.toggleElementsOnly){a.onfocus=function(){b.onFocus(this)};a.ondblclick=function(){if(!b.open)b.onFocus(this)}}}},onFocus:function(b,c){this.options.debug&&window.console&&console.log("DEBUG: DateTimePicker Event Fired: beforeShow");this.options.beforeShow&&this.options.beforeShow();if(!c)c=b;this.input=b;var a;if(b.value)a=this.unformat(b.value,this.options.format).valueOf();else{a=new Date;if(this.options.maxDate&&a.valueOf()>this.options.maxDate.valueOf())a=new Date(this.options.maxDate.valueOf());if(this.options.minDate&&a.valueOf()<this.options.minDate.valueOf())a=new Date(this.options.minDate.valueOf())}this.show(c,a);this.open=true},select:function(d){this.choice=this.merge(this.choice,d);var c=this.dateFromObject(this.choice),a=this.format(c,this.options.inputOutputFormat?this.options.inputOutputFormat:this.options.format),b=this.format(c,this.options.format);if(this.input.value!=b){this.options.debug&&window.console&&console.log("DEBUG: DateTimePicker Event Fired: onChange - returned: "+a);if(this.options.onChange)this.options.onChange(a)}this.input.value=b;this.options.debug&&window.console&&console.log("DEBUG: DateTimePicker Event Fired: onSelect - returned: "+a);if(this.options.onSelect)this.options.onSelect(a);this.close(true)},getDate:function(d){for(var b=document.querySelectorAll(this.attachTo),c=[],a=0;a<b.length;a++){var e=b[a].value?d?this.format(new Date(this.unformat(b[a].value,this.options.format)),d):this.unformat(b[a].value,this.options.format):null;c.push(e)}return c.length==1?c[0]:c},allowZoomOut:function(){return this.mode=="time"&&this.options.timePickerOnly?false:this.mode=="decades"?false:this.mode=="year"&&!this.options.yearPicker?false:true},zoomOut:function(){if(!this.allowZoomOut())return;if(this.mode=="year")this.mode="decades";else if(this.mode=="time")this.mode="month";else this.mode="year";this.render()},next:function(){if(this.mode=="decades")this.d.setFullYear(this.d.getFullYear()+20);else if(this.mode=="year")this.d.setFullYear(this.d.getFullYear()+1);else if(this.mode=="month"){this.d.setDate(1);this.d.setMonth(this.d.getMonth()+1)}this.render()},previous:function(){if(this.mode=="decades")this.d.setFullYear(this.d.getFullYear()-20);else if(this.mode=="year")this.d.setFullYear(this.d.getFullYear()-1);else if(this.mode=="month"){this.d.setDate(1);this.d.setMonth(this.d.getMonth()-1)}this.render()},gotoToday:function(){var a=new Date;if(this.mode=="decades")this.d.setFullYear(a.getFullYear());else if(this.mode=="year")this.d.setFullYear(a.getFullYear());else if(this.mode=="month"){this.d.setDate(a.getDate());this.d.setMonth(a.getMonth());this.d.setFullYear(a.getFullYear())}this.merge(this.choice,{day:this.d.getDate(),month:this.d.getMonth(),year:this.d.getFullYear()});this.render()},show:function(c,a){this.formatMinMaxDates();if(a)this.d=new Date(a);else this.d=new Date;this.today=new Date;this.choice=this.dateToObject(this.d);this.mode=this.options.startView=="time"&&!this.options.timePicker?"month":this.options.startView;this.render();var b=this.getPositioning(c);this.setStyle(b,this.picker)},close:function(c,a){if(!this.picker)return;var b=a&&(a.target?a.target:a.srcElement)!=this.picker&&!this.isChildOf(a.target?a.target:a.srcElement,this.picker);(c||b)&&this.destroy()},destroy:function(){document.body.removeChild(this.picker);this.picker=null;this.open=false;this.unbindEvents();this.options.debug&&window.console&&console.log("DEBUG: DateTimePicker Event Fired: onClose");this.options.onClose&&this.options.onClose()},unbindEvents:function(){document[document.removeEventListener?"removeEventListener":"detachEvent"]((!document.removeEventListener?"on":"")+"keydown",this.events.keydown,false);document[document.removeEventListener?"removeEventListener":"detachEvent"]((!document.removeEventListener?"on":"")+"mousedown",this.events.mousedown,false)},bindEvents:function(){var a=this;this.events.mousedown=function(b){b=b?b:window.event;a.close(false,b)};this.events.keydown=function(b){b=b?b:window.event;if(a.picker){switch(b.keyCode){case 9:case 27:case 65:case 67:a.input.focus();a.close(true);return;case 13:if(a.mode=="time")a.picker.getElementsByClassName("ok")[0].click();else if(a.mode=="month"&&!a.options.timePicker)a.select();else{a.mode=a.mode=="decades"?"year":a.mode=="year"?"month":a.mode=="month"&&a.options.timePicker?"time":a.mode;a.merge(a.choice,{day:a.d.getDate(),month:a.d.getMonth(),year:a.d.getFullYear()});a.render()}break;case 32:a.zoomOut();break;case 36:a.gotoToday();break;case 37:case 38:case 39:case 40:if(a.mode=="time")a.picker.getElementsByClassName("hour")[0].focus();else{var c=new Date(a.d);if(a.mode=="decades"){c.setFullYear(a.d.getFullYear()+(b.keyCode==40?5:b.keyCode==39?1:b.keyCode==38?-5:-1));if(a.options.maxDate&&c.valueOf()>a.options.maxDate.valueOf())c=new Date(a.options.maxDate);else if(a.options.minDate&&c.valueOf()<a.options.minDate.valueOf())c=new Date(a.options.minDate)}else if(a.mode=="year"){c.setMonth(a.d.getMonth()+(b.keyCode==40?3:b.keyCode==39?1:b.keyCode==38?-3:-1));if(a.options.maxDate&&c.valueOf()>a.options.maxDate.valueOf())c=new Date(a.options.maxDate);else if(a.options.minDate&&c.valueOf()<a.options.minDate.valueOf())c=new Date(a.options.minDate)}else if(a.mode=="month"){c.setDate(a.d.getDate()+(b.keyCode==40?7:b.keyCode==39?1:b.keyCode==38?-7:-1));if(a.options.maxDate&&c.valueOf()>a.options.maxDate.valueOf()||a.options.minDate&&c.valueOf()<a.options.minDate.valueOf())break}a.d=new Date(c);a.merge(a.choice,{day:a.d.getDate(),month:a.d.getMonth(),year:a.d.getFullYear()});a.render()}}b.preventDefault?b.preventDefault():(b.returnValue=false);return false}};document[document.addEventListener?"addEventListener":"attachEvent"]((!document.addEventListener?"on":"")+"keydown",this.events.keydown,false);document[document.addEventListener?"addEventListener":"attachEvent"]((!document.addEventListener?"on":"")+"mousedown",this.events.mousedown,false)},render:function(){if(!this.picker)this.constructPicker();else while(this.contents.hasChildNodes())this.contents.removeChild(this.contents.lastChild);var a=new Date(this.d.getTime());this.limit={right:false,left:false};if(this.mode=="decades")this.renderDecades();else if(this.mode=="year")this.renderYear();else if(this.mode=="time"){this.renderTime();this.limit={right:true,left:true}}else this.renderMonth();this.setStyle({visibility:this.limit.left?"hidden":"visible"},this.picker.getElementsByClassName("previous")[0]);this.setStyle({visibility:this.limit.right?"hidden":"visible"},this.picker.getElementsByClassName("next")[0]);this.setStyle({cursor:this.allowZoomOut()?"pointer":"default"},this.picker.getElementsByClassName("titleText")[0]);this.d=a},constructPicker:function(){var g=this,h=this.maxZindex();this.picker=document.createElement("div");this.picker.className="datetimepicker"+(this.options.pickerClass=="datetimepicker"?"":" "+this.options.pickerClass);this.setStyle({zIndex:h===0?1001:h+1,top:0,left:0},this.picker);document.body.appendChild(this.picker);var b=document.createElement("div");b.className="header";this.picker.appendChild(b);var e=document.createElement("div");e.className="title";b.appendChild(e);var d=document.createElement("div");d.className="previous";d.onclick=function(){g.previous()};d.innerHTML=this.options.prevText;b.appendChild(d);var c=document.createElement("div");c.className="next";c.onclick=function(){g.next()};c.innerHTML=this.options.nextText;b.appendChild(c);var f=document.createElement("div");f.className="titleText";f.onclick=function(){g.zoomOut()};e.appendChild(f);var a=document.createElement("div");a.className="body";this.picker.appendChild(a);this.contents=document.createElement("div");this.setStyle({position:"absolute",top:0,left:0,width:a.offsetWidth,height:a.offsetHeight},this.contents);a.appendChild(this.contents);this.bindEvents()},renderTime:function(){var a=this,b=this.options.timePickerFormat===12,f=document.createElement("div");f.className="time"+(b?" f12":"");this.contents.appendChild(f);var j=this.picker.getElementsByClassName("titleText")[0];if(this.options.timePickerOnly)j.innerHTML="Select a time";else j.innerHTML=this.format(this.d,"j M, Y");var c=document.createElement("input");c.value=this.format(this.d,b?"h":"H");c.formatValue=this.d.getHours();c.maxLength=2;c.className="hour";this.events.hourmousewheel=function(d){d=d?d:window.event;var e=c.formatValue,f=c.value.toInt();c.focus();if((d.wheelDelta?d.wheelDelta/120:-d.detail/3)>0){e=e<23?e+1:0;f=f<(b?12:23)?f+1:b?1:0}else{e=e>0?e-1:23;f=f>(b?1:0)?f-1:b?12:23}if(b)a.picker.getElementsByClassName("ampm")[0].innerHTML=e<12?"am":"pm";c.formatValue=e;c.value=a.leadZero(b?f:e);d.preventDefault?d.preventDefault():(d.returnValue=false);d.stopPropagation?d.stopPropagation():(d.cancelBubble=true)};c[c.addEventListener?"addEventListener":"attachEvent"]((!c.addEventListener?"on":"")+(/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"),this.events.hourmousewheel,false);c.onkeydown=function(c){c=c?c:window.event;var d=this.formatValue,e=this.value.toInt();switch(c.keyCode){case 27:a.input.focus();a.close(true);return;case 38:d=d<23?d+1:0;e=e<(b?12:23)?e+1:b?1:0;break;case 40:d=d>0?d-1:23;e=e>(b?1:0)?e-1:b?12:23;break;case 39:case 37:a.picker.getElementsByClassName("minutes")[0].focus();break;case 13:a.picker.getElementsByClassName("ok")[0].click();return}if(b)a.picker.getElementsByClassName("ampm")[0].innerHTML=d<12?"am":"pm";this.formatValue=d;this.value=a.leadZero(b?e:d);c.preventDefault?c.preventDefault():(c.returnValue=false);c.stopPropagation?c.stopPropagation():(c.cancelBubble=true)};f.appendChild(c);var e=a.options.minuteIncrement>59||a.options.minuteIncrement<0?0:a.options.minuteIncrement,d=document.createElement("input");d.value=this.leadZero(e==0?0:Math.round(this.d.getMinutes()/e)*e%60);d.maxLength=2;d.className="minutes";if(e==0)d.disabled=true;else{this.events.minutesmousewheel=function(b){b=b?b:window.event;var c=d.value.toInt();d.focus();if((b.wheelDelta?b.wheelDelta/120:-b.detail/3)>0)c=c+e>59?c+e-60:c+e;else c=c-e<0?c-e+60:c-e;d.value=a.leadZero(c);b.preventDefault?b.preventDefault():(b.returnValue=false);b.stopPropagation?b.stopPropagation():(b.cancelBubble=true)};d[d.addEventListener?"addEventListener":"attachEvent"]((!d.addEventListener?"on":"")+(/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"),this.events.minutesmousewheel,false)}d.onkeydown=function(b){b=b?b:window.event;var c=this.value.toInt(),d=a.options.minuteIncrement;switch(b.keyCode){case 27:a.input.focus();a.close(true);return;case 38:c=c<60-d?c+d:0;break;case 40:c=c>0?c-d:60-d;break;case 37:case 39:a.picker.getElementsByClassName("hour")[0].focus();break;case 13:a.picker.getElementsByClassName("ok")[0].click();return}this.value=a.leadZero(c);b.preventDefault?b.preventDefault():(b.returnValue=false);b.stopPropagation?b.stopPropagation():(b.cancelBubble=true)};f.appendChild(d);var h=document.createElement("div");h.className="separator";h.innerHTML=":";f.appendChild(h);if(b){var i=document.createElement("div");i.className="ampm";i.innerHTML=this.format(this.d,"a");f.appendChild(i)}var g=document.createElement("input");g.type="submit";g.value="OK";g.className="ok";g.onclick=function(b){var c=a.picker.getElementsByClassName("hour")[0].formatValue,d=a.picker.getElementsByClassName("minutes")[0].value.toInt(),e=a.merge(a.dateToObject(a.d),{hours:c,minutes:d});b=b?b:window.event;b.preventDefault?b.preventDefault():(b.returnValue=false);a.select(e)};g.maxLength=2;f.appendChild(g)},renderMonth:function(){var j=this.d.getMonth(),m=this.picker.getElementsByClassName("titleText")[0];m.innerHTML=this.options.months[j]+" "+this.d.getFullYear();this.d.setDate(1);while(this.d.getDay()!=this.options.startDay)this.d.setDate(this.d.getDate()-1);var f=document.createElement("div");f.className="days";this.contents.appendChild(f);var i=document.createElement("div");i.className="titles";f.appendChild(i);for(var d,a,b,e,g=this.options.startDay;g<this.options.startDay+7;g++){var k=document.createElement("div");k.className="title day day"+g%7;k.innerHTML=this.options.days[g%7].substring(0,this.options.dayShort);i.appendChild(k)}var h=false,n=this.today.toDateString(),l=this.dateFromObject(this.choice).toDateString();for(d=0;d<42;d++){a=[];a.push("day");a.push("day"+this.d.getDay());this.d.toDateString()==n&&a.push("today");this.d.toDateString()==l&&a.push("selected");this.d.getMonth()!=j&&a.push("otherMonth");if(d%7===0){e=document.createElement("div");e.className="week week"+Math.floor(d/7);f.appendChild(e)}b=document.createElement("div");b.className=a.join(" ");b.innerHTML=this.d.getDate();b.choice={day:this.d.getDate(),month:this.d.getMonth(),year:this.d.getFullYear()};e.appendChild(b);if(this.limited("date")){b.className+=" unavailable";if(h)this.limit.right=true;else if(this.d.getMonth()==j)this.limit.left=true}else{h=true;var c=this;b.onclick=function(){var a=this.choice;if(c.options.timePicker){c.d.setDate(a.day);c.d.setMonth(a.month);c.mode="time";c.render()}else c.select(a)}}this.d.setDate(this.d.getDate()+1)}if(!h)this.limit.right=true},renderYear:function(){var b=this,h=this.today.getMonth(),g=this.d.getFullYear()==this.today.getFullYear(),f=this.d.getFullYear()==this.choice.year;this.picker.getElementsByClassName("titleText")[0].innerHTML=this.d.getFullYear();this.d.setMonth(0);var a,c,d=false,e=document.createElement("div");e.className="months";this.contents.appendChild(e);for(a=0;a<=11;a++){c=document.createElement("div");c.className="month month"+(a+1)+(a==h&&g?" today":"")+(a==this.choice.month&&f?" selected":"");c.innerHTML=this.options.monthShort?this.options.months[a].substring(0,this.options.monthShort):this.options.months[a];c.choice=a;e.appendChild(c);this.d.setMonth(a);if(this.limited("month")){c.className+=" unavailable";if(d)this.limit.right=true;else this.limit.left=true}else{d=true;c.onclick=function(){b.d.setDate(1);b.d.setMonth(this.choice);b.merge(b.choice,{month:b.d.getMonth()});b.mode="month";b.render()}}}if(!d)this.limit.right=true},renderDecades:function(){var b=this;while(this.d.getFullYear()%20>0)this.d.setFullYear(this.d.getFullYear()-1);this.picker.getElementsByClassName("titleText")[0].innerHTML=this.d.getFullYear()+"-"+(this.d.getFullYear()+20-1);var d,c,a,e=false,f=document.createElement("div");f.className="years";this.contents.appendChild(f);if(this.options.minDate&&this.d.getFullYear()<=this.options.minDate.getFullYear())this.limit.left=true;for(d=0;d<20;d++){c=this.d.getFullYear();a=document.createElement("div");a.className="year year"+d+(c==this.today.getFullYear()?" today":"")+(c==this.choice.year?" selected":"");a.innerHTML=c;a.choice=c;f.appendChild(a);if(this.limited("year")){a.className+=" unavailable";if(e)this.limit.right=true;else this.limit.left=true}else{e=true;a.onclick=function(){b.d.setFullYear(this.choice);b.merge(b.choice,{year:b.d.getFullYear()});b.mode="year";b.render()}}this.d.setFullYear(this.d.getFullYear()+1)}if(!e)this.limit.right=true;if(this.options.maxDate&&this.d.getFullYear()>=this.options.maxDate.getFullYear())this.limit.right=true},limited:function(d){var b=this.options.minDate,a=this.options.maxDate;if(!b&&!a)return false;switch(d){case"year":return b&&this.d.getFullYear()<this.options.minDate.getFullYear()||a&&this.d.getFullYear()>this.options.maxDate.getFullYear();case"month":var c=(""+this.d.getFullYear()+this.leadZero(this.d.getMonth())).toInt();return b&&c<(""+this.options.minDate.getFullYear()+this.leadZero(this.options.minDate.getMonth())).toInt()||a&&c>(""+this.options.maxDate.getFullYear()+this.leadZero(this.options.maxDate.getMonth())).toInt();case"date":return b&&this.d<this.options.minDate||a&&this.d>this.options.maxDate}},getPositioning:function(a){var g=Math.max(a.clientWidth,a.scrollWidth,a.offsetWidth),d=Math.max(a.clientHeight,a.scrollHeight,a.offsetHeight),b=0,c=0;if(a.offsetParent)do{b+=a.offsetLeft;c+=a.offsetTop}while(a=a.offsetParent);b+=this.options.positionOffset.x;c+=d+this.options.positionOffset.y;var f=Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth),e=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight);if(b+this.picker.offsetWidth>f){b=b-this.picker.offsetWidth+g;if(b<0)b=0}if(c+this.picker.offsetHeight>e){c=c-this.picker.offsetHeight-d;if(c<0)c=0}return{left:b,top:c}},merge:function(b,a){for(name in a){if(b[name]===a[name])continue;b[name]=a[name]}return b},isChildOf:function(a,c){if(c&&a){if(c===a)return true;var b=c.getElementsByTagName(a.tagName);if(b.length>0){for(var d=0;d<b.length;d++)if(b[d]===a)return true;return false}else return false}else return false},dateToObject:function(a){return{year:a.getFullYear(),month:a.getMonth(),day:a.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds()}},dateFromObject:function(e){var a=new Date;a.setDate(1);for(var d=["year","month","day","hours","minutes","seconds"],c=0;c<d.length;c++){var b=e[d[c]];if(b===null||b===undefined)return;switch(d[c]){case"day":a.setDate(b);break;case"month":a.setMonth(b);break;case"year":a.setFullYear(b);break;case"hours":a.setHours(b);break;case"minutes":a.setMinutes(b);break;case"seconds":a.setSeconds(b)}}return a},leadZero:function(a){return a<10?"0"+a:a},format:function(b,f){for(var a="",d=b.getDate(),c=b.getHours(),g=b.getMonth(),e=0;e<f.length;e++)switch(f.charAt(e)){case"\\":e++;a+=f.charAt(e);break;case"y":a+=(b.getFullYear()+"").substring(2);break;case"Y":a+=b.getFullYear();break;case"m":a+=this.leadZero(g+1);break;case"n":a+=g+1;break;case"M":a+=this.options.months[g].substring(0,this.options.monthShort);break;case"F":a+=this.options.months[g];break;case"d":a+=this.leadZero(d);break;case"j":a+=d;break;case"D":a+=this.options.days[b.getDay()].substring(0,this.options.dayShort);break;case"l":a+=this.options.days[b.getDay()];break;case"G":a+=c;break;case"H":a+=this.leadZero(c);break;case"g":a+=c%12?c%12:12;break;case"h":a+=this.leadZero(c%12?c%12:12);break;case"a":a+=c>11?"pm":"am";break;case"A":a+=c>11?"PM":"AM";break;case"i":a+=this.leadZero(b.getMinutes());break;case"s":a+=this.leadZero(b.getSeconds());break;case"U":a+=Math.floor(b.valueOf()/1e3);break;case"T":a+=b.valueOf();break;case"S":a+=this.options.daySuffix[d%10>3?0:(d%100-d%10!=10)*d%10];break;default:a+=f.charAt(e)}return a},unformat:function(d,i){var b=new Date;b.setMonth(0);b.setDate(1);var e={},c,h;d=d.toString();for(var f=0;f<i.length;f++){c=i.charAt(f);switch(c){case"\\":r=null;f++;break;case"y":r="[0-9]{2}";break;case"Y":r="[0-9]{4}";break;case"m":r="0[1-9]|1[012]";break;case"n":r="[1-9]|1[012]";break;case"M":r="[A-Za-z]{"+this.options.monthShort+"}";break;case"F":r="[A-Za-z]+";break;case"d":r="0[1-9]|[12][0-9]|3[01]";break;case"j":r="[12][0-9]|3[01]|[1-9]";break;case"D":r="[A-Za-z]{"+this.options.dayShort+"}";break;case"l":r="[A-Za-z]+";break;case"G":case"H":case"g":case"h":r="[0-9]{1,2}";break;case"a":r="(am|pm)";break;case"A":r="(AM|PM)";break;case"i":case"s":r="[012345][0-9]";break;case"U":r="-?[0-9]+$";break;case"T":r="-?[0-9]+$";break;case"S":r="(th|st|nd|rd)";break;default:r=null}if(r){h=d.match("^"+r);if(h){e[c]=h[0];d=d.substring(e[c].length)}else{this.options.debug&&window.console&&console.error("ERROR: DateTimePicker Unexpected format at: '"+d+"' expected format character '"+c+"' (pattern '"+r+"')");return null}}else d=d.substring(1)}for(c in e){var a=e[c];switch(c){case"y":b.setFullYear(a<30?2e3+a.toInt():1900+a.toInt());break;case"Y":b.setFullYear(a);break;case"m":case"n":b.setMonth(a-1);break;case"M":for(var g=0;g<this.options.months.length;g++)this.options.months[g].substring(0,this.options.monthShort)===a&&b.setMonth(g);break;case"F":b.setMonth(this.options.months.indexOf(a));break;case"d":case"j":b.setDate(a);break;case"G":case"H":b.setHours(a);break;case"g":case"h":if(e.a=="pm"||e.A=="PM")b.setHours(a==12?12:a.toInt()+12);else b.setHours(a==12?0:a.toInt());break;case"i":b.setMinutes(a);break;case"s":b.setSeconds(a);break;case"U":b=new Date(a.toInt()*1e3);break;case"T":b=new Date(a.toInt())}}return b},setStyle:function(b,c){var d={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",zIndex:"@"};for(name in b){var a=b[name];switch(typeof b[name]){case"string":if(a==String(Number(a)))a=Math.round(a);c.style[name]=a;break;case"number":a=d[name]?d[name].replace("@",Math.round(a)):"";if(a)c.style[name]=a}}},maxZindex:function(){for(var b=document.getElementsByTagName("*"),c=0,a=0;a<b.length-1;a++)if(parseInt(b[a].style.zIndex)>c)c=parseInt(b[a].style.zIndex);return c}};if(typeof Array.prototype.indexOf!=="function")Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++)if(this[a]==b)return a;return-1};if(typeof String.prototype.toInt!=="function")String.prototype.toInt=function(){return parseInt(this,10)};var b=a.initialise(d,c);return b}